<!doctype html>
<html ng-app="mtgPriceTracker">
<head>
    <meta charset="utf-8">
    <title>mtg price tracker</title>
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="main.css" rel="stylesheet">
    <script src="angular.js"></script>
    <script src="ui-bootstrap.js"></script>
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-2.1.3.js"></script>
    <script src="indexController.js"></script>
</head>
<body>
<script id="myTooltipTemplate.html" type="text/ng-template">
    <div ng-repeat="h in card.priceHistory">{{h.price}} {{h.date | date}}</div>
</script>
<div class="col-md-12" ng-cloack ng-controller="optionsController">
    <nav class="navbar navbar-default navbar-fixed-top">
        <div style="margin-top: 9px;">
            <form class="form-inline">
                <div class="form-group">
                    <label for="set">Set</label>
                    <input class="form-control" id="set" ng-model="filterModelSet"
                           type="text"
                           typeahead-min-length="0" typeahead-on-select="filterModel.set = filterModelSet"
                           uib-typeahead="item as item.title for item in sets | filter:{title:$viewValue}">
                    <button class="btn btn-default" ng-click="filterModel.set = undefined">clear</button>
                </div>
                <div class="form-group">
                    <label for="price">Price</label>
                    <input class="form-control" id="price" min="0" ng-model="filterModel.price" placeholder="0" step="0.01"
                           type="number">
                </div>
                <div class="form-group">
                    <label for="rarity">Rarity</label>
                    <div class="btn-group">
                        <label class="btn btn-default" ng-class="{ 'btn-primary': filterModel.c }"
                               ng-model="filterModel.c" uib-btn-checkbox>Common</label>
                        <label class="btn btn-default" ng-class="{ 'btn-success': filterModel.u }"
                               ng-model="filterModel.u" uib-btn-checkbox>Uncommon</label>
                        <label class="btn btn-default" ng-class="{ 'btn-warning': filterModel.r }"
                               ng-model="filterModel.r" uib-btn-checkbox>Rare</label>
                        <label class="btn btn-default" ng-class="{ 'btn-danger': filterModel.m }"
                               ng-model="filterModel.m" uib-btn-checkbox>Mythic</label>
                        <label class="btn btn-default" ng-class="{ 'btn-danger': filterModel.s }"
                               ng-model="filterModel.s" uib-btn-checkbox>Special</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="width">image width</label>
                    <input class="form-control" id="width" min="50" ng-model="filterModel.width" placeholder="50" step="10"
                           type="number">
                </div>
                <div class="form-group">
                    <label for="width">was 0 at</label>
                    <input class="form-control" ng-model="filterModel.z" type="date">
                </div>
                <!--<div class="form-group">
                  <label class="btn btn-default" ng-class="{ 'btn-primary': filterModel.inLib }"  ng-model="filterModel.inLib" uib-btn-checkbox>in lib only</label>
                </div>
                <div class="form-group">
                  <label class="btn btn-default" ng-class="{ 'btn-warning': filterModel.editLib }"  ng-model="filterModel.editLib" uib-btn-checkbox>edit lib</label>
                </div>-->
                <div class="form-group pull-right" style="padding-right: 10px">
                    <button class="btn btn-default" ng-click="updatePrice()" ng-disabled="updatingPrice" ng-hide="true">
                        update price
                    </button>
                </div>
            </form>
        </div>
    </nav>
    <div class="row">
        <div class="card"
             ng-repeat="card in set.cards | filter:cardFilter(filterModel) | page:pages.currentPage:pages.itemsPerPage" sort=" | orderBy:'price':true">
            <img class="img-thumbnail" ng-src="http://mtgsale.ru/cardImage/{{card.setId}}/ENG/{{card.id}}.jpg"
                 style="width:{{filterModel.width}}px">
            <button class="btn inLib" ng-class="{ 'btn-success' : card.inLib}" ng-click="setInLib(card, !card.inLib)"
                    ng-if="filterModel.editLib"><span class="glyphicon glyphicon-file"></button>
            <span class="price" style="font-size:{{filterModel.width/4}}px"
                  tooltip-placement="bottom" uib-tooltip-template="'myTooltipTemplate.html'">{{ card.price }} â‚½</span>
            <span class="name">{{card.title}}</span>
        </div>
    </div>
</div>
</body>
</html>

